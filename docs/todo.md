# TODO - マイクロスプリント計画

## 📋 スプリント構成

各スプリントは独立して価値検証可能な最小単位として設計されています。
各スプリントの完了時点で、その機能が実際に使えることを確認します。

---

## 🚀 スプリント1: 最小限の検索実装

**目標**: 1つのキーワードでX.comを検索し、結果をJSON保存する

**検証する価値**:
- SERP APIが正しく動作し、X.com検索結果が取得できるか
- Google検索経由でツイート情報（URL、タイトル、スニペット）が取得できるか
- 収集したデータが適切な形式でJSON保存できるか
- 手動実行により、最低限の情報収集ができるか

**成果物**:
- [x] `search.js`: SERP API統合スクリプト
- [x] ハードコードされた1キーワードで検索実行
- [x] `site:x.com "キーワード" after:日付` 形式のクエリ生成
- [x] 検索結果をコンソール出力
- [x] 検索結果を`twitter-results-YYYY-MM-DD.json`に保存
- [x] `bun run scripts/search.ts <keyword>`で実行可能

**検証方法**:
1. スクリプトを実行
2. JSONファイルが生成される
3. ツイートURL、タイトル、スニペットが含まれている
4. 実際に有用な情報が取得できている

**完了条件**:
- 1キーワードで検索が実行できる
- JSON形式で結果が保存される
- 取得したツイートURLが実在する

---

## 🎨 スプリント2: Twitter oEmbed統合

**目標**: ツイートの埋め込みHTMLを取得し、リッチな情報を保存する

**検証する価値**:
- Twitter oEmbed APIで埋め込みHTMLが取得できるか
- 埋め込みHTMLから追加情報（著者名など）が取得できるか
- 埋め込みHTML付きデータの保存が正しく動作するか
- ツイートの内容を視覚的に確認できる形式でデータが保存されるか

**成果物**:
- [x] Twitter oEmbed API統合
- [x] 各ツイートURLに対してoEmbed呼び出し
- [x] `embedHtml`と`authorName`をJSON保存
- [x] エラーハンドリング（削除されたツイート、非公開など）
- [x] `embedSuccess`フラグの追加

**検証方法**:
1. スプリント1の結果を使って実行
2. JSONに`embedHtml`と`authorName`が追加される
3. 埋め込みHTMLをHTMLファイルに貼り付けて表示確認
4. ツイートの内容が正しく表示される

**完了条件**:
- oEmbed APIからの取得が成功する
- 埋め込みHTMLが保存される
- 削除済み/非公開ツイートのエラーハンドリングができている

---

## 📦 スプリント3: 複数キーワード対応

**目標**: 設定ファイルから複数キーワードを読み込み、一括検索する

**検証する価値**:
- 複数キーワードの管理が効率的にできるか
- 設定ファイルでキーワードのON/OFFができるか
- 複数キーワードの検索が連続して実行できるか
- キーワードごとに結果を区別して保存できるか

**成果物**:
- [x] `keywords.json`設定ファイル作成
- [x] キーワードの`id`, `query`, `enabled`フィールド対応
- [x] 複数キーワードのループ処理
- [x] キーワードごとに検索実行
- [x] 結果JSON内に`keyword`フィールド追加
- [x] `enabled: false`のキーワードをスキップ

**検証方法**:
1. `keywords.json`に3つのキーワードを設定
2. 1つは`enabled: false`に設定
3. スクリプトを実行
4. 有効な2つのキーワードのみ検索される
5. 各結果にキーワード情報が含まれる

**完了条件**:
- 設定ファイルからキーワードが読み込める
- 複数キーワードで検索が実行される
- enabled/disabledの制御が機能する

---

## 🔍 スプリント4: 重複チェック機能

**目標**: 既存データを確認し、重複するツイートをスキップする

**検証する価値**:
- 同じツイートを何度も取得しないことでAPIコストが削減できるか
- 重複チェックにより実行速度が向上するか
- 既存データとの整合性が保たれるか
- 新しいツイートのみ追加される仕組みが機能するか

**成果物**:
- [x] 既存JSONファイルの読み込み機能
- [x] 全てのツイートURLを抽出
- [x] 新規ツイートURLとの重複チェック
- [x] 重複する場合はoEmbed APIスキップ
- [x] スキップしたツイート数をログ出力
- [x] 新規ツイートのみ追加保存

**検証方法**:
1. 既存のJSONファイルがある状態で実行
2. 同じキーワードで再度検索
3. 重複するツイートがスキップされる
4. ログに「X件スキップ」と表示される
5. JSONファイルに新規ツイートのみ追加される

**完了条件**:
- 重複URLの検出が正しく動作する
- 重複時にoEmbed APIが呼ばれない
- 新規ツイートのみが追加される

---

## 🖥️ スプリント5: 基本的なWeb表示

**目標**: 収集したデータをブラウザで閲覧できるシンプルなWebアプリを作成

**検証する価値**:
- 収集したデータがWebブラウザで閲覧できるか
- Twitter埋め込みが正しく表示されるか
- フィード形式で情報が読みやすいか
- 収集した情報が意思決定に使える形で確認できるか

**成果物**:
- [x] Next.jsページ: メインページ (`page.tsx`)
- [x] TweetFeedコンポーネント: データ読み込みとレンダリング
- [x] `/api/tweets` エンドポイント: JSONファイル読み込み
- [x] TweetEmbedコンポーネント: ツイート埋め込み表示
- [x] Twitter埋め込みスクリプト統合 (`widgets.js`)
- [x] シンプルなCSS（`globals.css`）
- [x] `bun run dev`でローカルサーバー起動

**検証方法**:
1. Webサーバーを起動
2. ブラウザでアクセス
3. 収集したツイートが一覧表示される
4. 各ツイートが正しくレンダリングされる
5. スクロールして全ツイートを閲覧できる

**完了条件**:
- ブラウザでツイート一覧が表示される
- Twitter埋め込みが正しく動作する
- 基本的な閲覧体験が提供される

---

## 🔎 スプリント6: フィルタリング機能

**目標**: キーワードと日付でデータをフィルタリングできるようにする

**検証する価値**:
- 大量のデータから目的の情報に素早くアクセスできるか
- キーワードフィルタで関心のあるトピックに絞り込めるか
- 日付フィルタで期間を限定した分析ができるか
- フィルタ機能により意思決定が効率化されるか

**成果物**:
- [x] キーワード選択UI（ドロップダウン）
- [x] 日付選択UI（ドロップダウン）
- [x] フィルタ適用ロジック
- [x] フィルタリング結果の動的表示
- [x] フィルタリセット機能
- [x] 該当件数の表示

**検証方法**:
1. 複数キーワード・複数日付のデータがある状態
2. キーワードでフィルタを適用
3. 該当するツイートのみ表示される
4. 日付範囲でフィルタを適用
5. 期間内のツイートのみ表示される
6. フィルタをリセットすると全て表示される

**完了条件**:
- キーワードフィルタが機能する
- 日付フィルタが機能する
- フィルタ結果が正しく表示される
- 複数フィルタの組み合わせが機能する

---

## 📊 スプリント完了チェックリスト

各スプリント完了時に以下を確認：

- [ ] 機能が期待通りに動作する
- [ ] エラーハンドリングが適切
- [ ] コードにコメントが記載されている
- [ ] README.mdが更新されている（実行方法など）
- [ ] 検証する価値が実際に確認できた

---

## 🎯 優先順位と依存関係

```
スプリント1 → スプリント2 → スプリント3 → スプリント4
                                                ↓
                                         スプリント5 → スプリント6
```

**推奨実施順序**:
1. スプリント1で基本機能を確立
2. スプリント2でデータの質を向上
3. スプリント3で実用性を拡大
4. スプリント4で効率化
5. スプリント5で視覚化
6. スプリント6でユーザビリティ向上

**各スプリントの期待時間**:
- スプリント1-4: バックエンド実装（各2-4時間）
- スプリント5-6: フロントエンド実装（各3-5時間）

---

**作成日**: 2026-01-22
**バージョン**: 1.0.0
